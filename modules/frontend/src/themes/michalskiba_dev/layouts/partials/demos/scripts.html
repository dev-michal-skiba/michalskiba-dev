{{- partial "scripts.html" .}}
<script>
    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) === 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    function setCookie(name, value) {
        document.cookie = name + "=" + value + "; Path=/; SameSite=Lax; Secure";
    }

    function getVersionSwitchValueFromCookie() {
        const cookie_value = getCookie("is_secure_version_on");
        return cookie_value.toLowerCase() !== "false";
    }

    function setVersionSwitchValueCookie() {
        const isChecked = document.getElementById("version-switch").checked;
        let cookieValue;
        if ( isChecked === true )
            cookieValue = "true";
        else
            cookieValue = "false";
        setCookie("is_secure_version_on", cookieValue);
        location.reload();
    }

    window.onload = function() {
        document.getElementById("version-switch").checked = getVersionSwitchValueFromCookie();

        let addressSearchPhrase = localStorage.getItem("address_search_phrase");
        if (addressSearchPhrase == null) {
            addressSearchPhrase = ""
        }
        document.getElementById("address-search-phrase").value = addressSearchPhrase
    };
</script>
